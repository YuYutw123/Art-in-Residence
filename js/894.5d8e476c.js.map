{"version":3,"file":"js/894.5d8e476c.js","mappings":"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","sources":["webpack://art-in-residence/./src/components/StorySubpage/SubPage8.vue","webpack://art-in-residence/./src/components/StorySubpage/SubPage8.vue?3ac4"],"sourcesContent":["<template>\n  <div class=\"warp\">\n    <div class=\"container\">\n      <div class=\"video-wrapper\">\n        <video ref=\"video1\" id=\"my-video-1\" class=\"video-play video-js aos-init aos-animate\" data-aos=\"fade-in\" controls muted playsinline loop preload=\"auto\">\n          <source src=\"@/assets/sub-video/video12.mp4\" type=\"video/mp4\" />\n        </video>\n      </div>\n      <div class=\"video-wrapper\">\n        <video ref=\"video2\" id=\"my-video-2\" class=\"video-play video-js aos-init aos-animate\" data-aos=\"fade-in\" controls muted playsinline loop preload=\"auto\">\n          <source src=\"@/assets/sub-video/video13.mp4\" type=\"video/mp4\" />\n        </video>\n      </div>\n      <div class=\"video-wrapper\">\n        <video ref=\"video3\" id=\"my-video-3\" class=\"video-play video-js aos-init aos-animate\" data-aos=\"fade-in\" controls muted playsinline loop preload=\"auto\">\n          <source src=\"@/assets/sub-video/video14.mp4\" type=\"video/mp4\" />\n        </video>\n      </div>\n    </div>\n    <div class=\"container\">\n      <div class=\"row\">\n        <div class=\"row d-flex justify-content-center\">\n          <button type=\"button\" class=\"next-btn\" @click=\"goToTargetPage(4)\">去下一關！</button>\n        </div>\n      </div>\n    </div>\n  </div>\n  <footer class=\"mt-5\">\n    <div class=\"container\">\n      <div class=\"row\">\n        <p class=\"text-center\">©2024 八斗故事村</p>\n      </div>\n    </div>\n  </footer>\n</template>\n\n<script>\nexport default {\n  name: 'NavbarComponent',\n  props: {\n    activePage: {\n      type: Number,\n      required: true\n    }\n  },\n  data() {\n    return {\n      activePageNum: 0,\n      lastScrollTop: 0,\n      debounceTimeout: null,\n      debounceDelay: 50, // 防抖延迟\n    };\n  },\n  mounted() {\n    this.setupIntersectionObserver();\n    window.addEventListener('scroll', this.handleScroll);\n  },\n  beforeUnmount() {\n    window.removeEventListener('scroll', this.handleScroll);\n  },\n  methods: {\n    goToTargetPage(num) {\n      this.$emit('updatePageIndex', num);\n      this.activePageNum = num;\n      this.$router.push({ name: 'SubPage' + num });\n      localStorage.setItem('var2', true);\n    },\n    setupIntersectionObserver() {\n      const options = {\n        root: null,\n        rootMargin: '0px',\n        threshold: 0.5\n      };\n\n      const callback = (entries) => {\n        entries.forEach(entry => {\n          const video = entry.target;\n          if (entry.isIntersecting) {\n            video.play();\n          } else {\n            video.pause();\n          }\n        });\n      };\n\n      const observer = new IntersectionObserver(callback, options);\n      this.$refs.video1 && observer.observe(this.$refs.video1);\n      this.$refs.video2 && observer.observe(this.$refs.video2);\n      this.$refs.video3 && observer.observe(this.$refs.video3);\n    },\n    handleScroll() {\n      if (this.debounceTimeout) {\n        clearTimeout(this.debounceTimeout);\n      }\n\n      this.debounceTimeout = setTimeout(() => {\n        const scrollTop = window.scrollY || document.documentElement.scrollTop;\n        if (scrollTop > this.lastScrollTop) {\n          this.positionVideo('down');\n        } else if (scrollTop < this.lastScrollTop) {\n          this.positionVideo('up');\n        }\n        this.lastScrollTop = scrollTop <= 0 ? 0 : scrollTop;\n      }, this.debounceDelay);\n    },\n    positionVideo(direction) {\n      const videos = [this.$refs.video1, this.$refs.video2];\n      const viewportHeight = window.innerHeight;\n      \n      let visibleVideo = null;\n      for (let video of videos) {\n        if (video) {\n          const videoRect = video.getBoundingClientRect();\n          if (videoRect.top <= viewportHeight && videoRect.bottom >= 0) {\n            visibleVideo = video;\n            break;\n          }\n        }\n      }\n\n      if (visibleVideo) {\n        let targetVideo = null;\n        if (direction === 'down') {\n          targetVideo = (visibleVideo === this.$refs.video1) ? this.$refs.video2 : null;\n        } else if (direction === 'up') {\n          targetVideo = (visibleVideo === this.$refs.video2) ? this.$refs.video1 : null;\n        }\n\n        if (targetVideo) {\n          const targetVideoRect = targetVideo.getBoundingClientRect();\n          const targetScrollToPosition = window.scrollY + targetVideoRect.top - (viewportHeight / 2) + (targetVideoRect.height / 2);\n\n          // 限制最大滚动距离\n          const maxScrollDistance = 1000; // 根据需要调整\n          const scrollDistance = Math.abs(targetScrollToPosition - window.scrollY);\n          const limitedScrollDistance = Math.min(scrollDistance, maxScrollDistance);\n\n          window.scrollTo({\n            top: window.scrollY + (targetScrollToPosition > window.scrollY ? limitedScrollDistance : -limitedScrollDistance),\n            behavior: 'smooth'\n          });\n        }\n      }\n    }\n  }\n}\n</script>\n\n\n\n<style scoped>\n@import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@500&display=swap');\n\n.warp {\n  font-family: \"Noto Sans TC\", sans-serif;\n  overflow: hidden;\n}\n\n.container {\n  display: flex;\n  flex-direction: column;\n}\n\n.video-wrapper {\n  flex: 0 0 100vh;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.video-play {\n  max-width: 100%;\n  max-height: 100%;\n  object-fit: cover;\n}\n\n.next-btn {\n  width: 250px;\n  height: 100px;\n  margin-top: 2rem;\n  margin-bottom: 4rem;\n  border-radius: 10px;\n  font-size: 28px;\n  background-color: #008aac;\n  border: none;\n  color: #fff;\n  transition: all .3s ease;\n  &:hover {\n    color: #008aac;\n    background-color: #fff;\n    border: 1px solid #008aac;\n  }\n}\n\nfooter {\n  padding: 0.5rem;\n  background: #7bcadd;\n  color: #fff;\n  font-family: \"Noto Sans TC\", sans-serif;\n  font-weight: 600;\n}\n\n</style>\n\n","import { render } from \"./SubPage8.vue?vue&type=template&id=b4f2ff88&scoped=true\"\nimport script from \"./SubPage8.vue?vue&type=script&lang=js\"\nexport * from \"./SubPage8.vue?vue&type=script&lang=js\"\n\nimport \"./SubPage8.vue?vue&type=style&index=0&id=b4f2ff88&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-b4f2ff88\"]])\n\nexport default __exports__"],"names":["class","ref","id","controls","muted","playsinline","loop","preload","_createElementVNode","src","_imports_0","type","_hoisted_5","_imports_1","_hoisted_9","_imports_2","_hoisted_13","_createElementBlock","_Fragment","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","onClick","_cache","$event","$options","goToTargetPage","_hoisted_18","name","props","activePage","Number","required","data","activePageNum","lastScrollTop","debounceTimeout","debounceDelay","mounted","this","setupIntersectionObserver","window","addEventListener","handleScroll","beforeUnmount","removeEventListener","methods","num","$emit","$router","push","localStorage","setItem","options","root","rootMargin","threshold","callback","entries","forEach","entry","video","target","isIntersecting","play","pause","observer","IntersectionObserver","$refs","video1","observe","video2","video3","clearTimeout","setTimeout","scrollTop","scrollY","document","documentElement","positionVideo","direction","videos","viewportHeight","innerHeight","visibleVideo","videoRect","getBoundingClientRect","top","bottom","targetVideo","targetVideoRect","targetScrollToPosition","height","maxScrollDistance","scrollDistance","Math","abs","limitedScrollDistance","min","scrollTo","behavior","__exports__","render"],"sourceRoot":""}